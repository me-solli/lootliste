<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Feedback / Bug melden – Lootliste</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
:root{
  --gold:#f5c451;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:radial-gradient(ellipse at top,#181818 0%,#090909 65%);
  color:#eaeaea;
}

.wrapper{max-width:1200px;margin:0 auto}

/* ===== HERO ===== */
.hero{
  background:url("img/banner_diablo.png") center top / cover no-repeat;
  border-radius:0 0 26px 26px;
  overflow:hidden;
}
.hero-inner{
  padding:32px 36px 28px;
  background:linear-gradient(to bottom, rgba(0,0,0,.25), rgba(0,0,0,.7));
}
.hero h1{margin:0;font-size:30px;font-weight:700}
.hero p{margin:8px 0 0;opacity:.8}

/* ===== CONTENT ===== */
.container{
  padding:36px 28px 60px;
  display:flex;
  justify-content:center;
}

/* ===== PANEL ===== */
.panel{
  width:100%;
  max-width:720px;
  background:linear-gradient(
    to bottom,
    rgba(255,255,255,.045),
    rgba(255,255,255,.02)
  );
  border:1px solid rgba(255,255,255,.08);
  border-radius:20px;
  padding:22px 22px 24px;
}

/* ===== TEXT ===== */
.hint{
  font-size:13px;
  color:#b5b5b5;
  margin-bottom:16px;
  line-height:1.4;
}
.hint strong{
  color:#f0e68c;
  font-weight:600;
}

/* ===== FORM ===== */
textarea{
  width:100%;
  min-height:150px;
  padding:12px 14px;
  resize:vertical;
  background:#0f0f0f;
  color:#fff;
  border:1px solid #333;
  border-radius:14px;
  font-size:14px;
}

textarea:focus{
  outline:none;
  border-color:var(--gold);
  box-shadow:0 0 0 1px rgba(245,196,81,.35);
}

/* ===== ACTIONS ===== */
.actions{
  display:flex;
  gap:12px;
  align-items:center;
}

button{
  padding:8px 16px;
  font-size:13px;
  border-radius:999px;
  cursor:pointer;
  background:rgba(245,196,81,.08);
  color:var(--gold);
  border:1px solid rgba(245,196,81,.35);
  transition:
    background .2s ease,
    border-color .2s ease,
    box-shadow .2s ease,
    transform .15s ease;
}

button:hover{
  background:rgba(245,196,81,.15);
  border-color:rgba(245,196,81,.65);
  box-shadow:0 0 10px rgba(245,196,81,.35);
  transform:translateY(-1px);
}

/* ===== FEEDBACK ===== */
.success,
.error{
  margin-top:16px;
  padding:12px 14px;
  border-radius:14px;
  font-size:13px;
  display:none;
}

.success{
  background:rgba(76,255,76,.12);
  border:1px solid rgba(76,255,76,.35);
  color:#b7ffce;
}

.error{
  background:rgba(255,80,80,.12);
  border:1px solid rgba(255,80,80,.35);
  color:#ffb7b7;
}

.back-link{
  display:inline-block;
  margin-top:16px;
  font-size:12px;
  color:#aaa;
  text-decoration:none;
  opacity:.8;
}
.back-link:hover{opacity:1;text-decoration:underline}
</style>
</head>

<body>

<div class="wrapper">

<header class="hero">
  <div class="hero-inner">
    <h1>Feedback / Bug melden</h1>
    <p>Hilf mit, die Lootliste stabil & fair zu halten</p>
  </div>
</header>

<div class="container">

  <div class="panel">

    <div class="hint">
      Beschreibe kurz, was passiert ist und auf welcher Seite.<br>
      <strong>Screenshot-Unterstützung folgt in einer späteren Phase.</strong>
    </div>

    <form id="feedbackForm">
      <textarea
        name="description"
        placeholder="Was ist passiert? Auf welcher Seite?"
        required
        minlength="10"
      ></textarea>

      <input type="hidden" name="page" id="pageField" />

      <div class="actions">
        <button type="submit">Senden</button>
      </div>
    </form>

    <div class="success" id="successBox">
      ✅ Danke! Dein Feedback wurde gespeichert.
    </div>

    <div class="error" id="errorBox">
      ❌ Fehler beim Senden. Bitte später erneut versuchen.
    </div>

    <a href="index.html" class="back-link">← zurück zur Lootliste</a>

  </div>

</div>
</div>

<script>
const API = "https://lootliste-production.up.railway.app";

const form = document.getElementById("feedbackForm");
const successBox = document.getElementById("successBox");
const errorBox = document.getElementById("errorBox");

document.getElementById("pageField").value = window.location.pathname;

form.addEventListener("submit", async (e) => {
  e.preventDefault();

  successBox.style.display = "none";
  errorBox.style.display = "none";

  const payload = {
    description: form.description.value,
    page: document.getElementById("pageField").value
  };

  try {
    const res = await fetch(API + "/feedback", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(payload)
    });

    if (!res.ok) throw new Error();

    form.reset();
    successBox.style.display = "block";
  } catch {
    errorBox.style.display = "block";
  }
});
</script>

</body>
</html>
