<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>üéÅ Lootliste v2 ‚Äì Community Items | D2R Non-Ladder</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --gold:#f5c451;
  --bg:#0b0b0b;
  --panel:#121212;
  --border:#2a2a2a;
  --soft:#1a1a1a;
  --green:#4cff4c;
  --yellow:#ffd24c;
  --red:#ff5c5c;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:radial-gradient(ellipse at top,#1a1a1a 0%,#0b0b0b 65%);
  color:#eaeaea;
}

.wrapper{max-width:1400px;margin:0 auto}

/* ===== HERO BANNER ===== */
.banner{
  background:url("img/banner-diablo.jpg") center/cover no-repeat;
  border-radius:0 0 26px 26px;
  box-shadow:0 20px 40px rgba(0,0,0,.6);
}

.banner-inner{
  padding:42px 34px;
  background:linear-gradient(rgba(0,0,0,.65),rgba(0,0,0,.9));
  display:flex;
  justify-content:space-between;
  gap:30px;
  flex-wrap:wrap;
}

.banner h1{
  margin:0;
  font-size:38px;
  letter-spacing:.8px;
  color:var(--gold);
  text-shadow:0 0 14px rgba(245,196,81,.35);
}

.banner p{
  margin:10px 0 0;
  font-size:15px;
  opacity:.9;
}

.demo-badge{
  display:inline-block;
  margin-top:12px;
  font-size:12px;
  padding:5px 12px;
  border:1px solid var(--gold);
  color:var(--gold);
  border-radius:999px;
}

.banner-right{
  display:flex;
  flex-direction:column;
  gap:12px;
  align-items:flex-end;
}

.twitch{
  background:#9146FF;
  color:#fff;
  padding:12px 20px;
  border-radius:16px;
  font-weight:bold;
  text-decoration:none;
}
.twitch:hover{opacity:.85}

#visitorCounter{font-size:13px;opacity:.85}

/* ===== ICON BAR ===== */
.icon-bar{
  display:flex;
  gap:16px;
  padding:20px 24px;
  overflow-x:auto;
  background:linear-gradient(180deg,#131313,#0e0e0e);
  border-bottom:1px solid #222;
}

.icon-btn{
  min-width:96px;
  text-align:center;
  cursor:pointer;
  padding:12px 6px;
  border-radius:16px;
  border:1px solid transparent;
  transition:.2s;
}

.icon-btn img{
  width:42px;
  height:42px;
  filter:drop-shadow(0 0 8px rgba(245,196,81,.35));
}

.icon-btn span{
  display:block;
  margin-top:6px;
  font-size:12px;
  opacity:.85;
}

.icon-btn:hover{
  border-color:var(--gold);
}

.icon-btn.active{
  border-color:var(--gold);
  background:rgba(245,196,81,.1);
}

/* ===== CONTENT ===== */
.container{padding:28px}

/* ===== FILTER ===== */
.filter-panel{
  background:linear-gradient(180deg,#171717,#0f0f0f);
  border:1px solid var(--border);
  border-radius:20px;
  padding:18px;
  display:flex;
  flex-wrap:wrap;
  gap:12px;
  margin-bottom:14px;
}

.filter-panel input,
.filter-panel select{
  padding:10px 12px;
  background:#111;
  border:1px solid #333;
  color:#fff;
  border-radius:10px;
}

/* ===== INFO ===== */
.info-bar{
  margin-bottom:18px;
  font-size:13px;
  opacity:.9;
}

/* ===== CARDS ===== */
.cards{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:22px;
}

@media(max-width:1100px){.cards{grid-template-columns:repeat(2,1fr)}}
@media(max-width:650px){.cards{grid-template-columns:1fr}}

.card{
  display:flex;
  background:linear-gradient(180deg,#191919,#0f0f0f);
  border:1px solid var(--border);
  border-radius:20px;
  overflow:hidden;
  transition:.2s;
}
.card:hover{
  transform:translateY(-4px);
  box-shadow:0 10px 24px rgba(0,0,0,.5);
}

.card img{
  width:120px;
  padding:18px;
  background:radial-gradient(circle at top,#1f1f1f,#0b0b0b);
}

.card-body{
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:6px;
  flex:1;
}

.item-name{font-weight:bold;font-size:16px}
.category{font-size:12px;opacity:.7}
.stars{color:var(--gold)}

.roll{font-size:13px;color:#cfcfcf}

.status{
  display:inline-block;
  margin-top:4px;
  font-size:12px;
  padding:4px 10px;
  border-radius:999px;
  width:max-content;
}
.status.verfuegbar{background:rgba(76,255,76,.15);color:var(--green)}
.status.reserviert{background:rgba(255,210,76,.15);color:var(--yellow)}
.status.vergeben{background:rgba(255,92,92,.15);color:var(--red)}

.player{font-size:13px;opacity:.85}
.player a{color:var(--gold);text-decoration:none}

.cta{
  margin-top:8px;
  padding:9px;
  text-align:center;
  font-size:13px;
  background:#151515;
  border:1px solid var(--border);
  border-radius:12px;
  color:#fff;
  text-decoration:none;
}
.cta:hover{border-color:var(--gold);color:var(--gold)}

footer{
  margin-top:40px;
  padding:22px;
  border-top:1px solid #222;
  font-size:13px;
}
footer a{color:var(--gold);margin-right:16px;text-decoration:none}
</style>
</head>

<body>
<div class="wrapper">

<header class="banner">
  <div class="banner-inner">
    <div>
      <h1>Lootliste</h1>
      <p>Community Items ¬∑ Diablo II Resurrected ¬∑ Non-Ladder</p>
      <span class="demo-badge">v2 Design-Demo</span>
    </div>
    <div class="banner-right">
      <a class="twitch" href="https://www.twitch.tv/me_solli" target="_blank">
        ‚ñ∂ Twitch: me_solli
      </a>
      <div id="visitorCounter">üëÅ Besucher gesamt: ‚Ä¶</div>
    </div>
  </div>
</header>

<div class="icon-bar" id="iconBar"></div>

<div class="container">

<div class="filter-panel">
  <input id="search" placeholder="Item suchen‚Ä¶">
  <select id="statusFilter">
    <option value="">Alle Status</option>
    <option>Verf√ºgbar</option>
    <option>Reserviert</option>
    <option>Vergeben</option>
  </select>
  <select id="sortRating">
    <option value="desc">Rating ‚Üì</option>
    <option value="asc">Rating ‚Üë</option>
  </select>
</div>

<div class="info-bar" id="infoBar"></div>
<div class="cards" id="cards"></div>
</div>

<footer>
  <a href="impressum.html">Impressum</a>
  <a href="datenschutz.html">Datenschutz</a>
</footer>

</div>

<script type="module">
import items from "./items.js";

const ICONS={
  "Waffe":"waffe","Helm":"helm","R√ºstung":"ruestung","Schild":"schild",
  "G√ºrtel":"guertel","Handschuhe":"handschuhe","Amulett":"amulett",
  "Ring":"ring","Charm":"charm","Rune":"rune","Sonstiges":"sonstiges"
};

const iconBar=document.getElementById("iconBar");
let activeType="";

Object.keys(ICONS).forEach(type=>{
  const btn=document.createElement("div");
  btn.className="icon-btn";
  btn.innerHTML=`<img src="img/icons/${ICONS[type]}.png"><span>${type}</span>`;
  btn.onclick=()=>{
    document.querySelectorAll(".icon-btn").forEach(b=>b.classList.remove("active"));
    if(activeType===type){activeType="";}
    else{activeType=type;btn.classList.add("active");}
    render();
  };
  iconBar.appendChild(btn);
});

const cards=document.getElementById("cards");
const search=document.getElementById("search");
const statusFilter=document.getElementById("statusFilter");
const sortRating=document.getElementById("sortRating");
const infoBar=document.getElementById("infoBar");
const visitorCounter=document.getElementById("visitorCounter");

const rating=s=>(s?.match(/‚òÖ/g)||[]).length;

function render(){
  cards.innerHTML="";
  let f=items.filter(i=>{
    const q=search.value.toLowerCase();
    return(
      (!activeType||i.type===activeType) &&
      (!statusFilter.value||i.status===statusFilter.value) &&
      (i.name.toLowerCase().includes(q)||i.category.toLowerCase().includes(q))
    );
  });

  f.sort((a,b)=>sortRating.value==="desc"
    ?rating(b.stars)-rating(a.stars)
    :rating(a.stars)-rating(b.stars));

  infoBar.innerHTML=`üì¶ <b>${f.length}</b> Items ¬∑ üïí ${new Date().toLocaleDateString("de-DE")}`;

  f.forEach(i=>{
    const s=i.status==="Reserviert"?"reserviert":i.status==="Vergeben"?"vergeben":"verfuegbar";
    cards.innerHTML+=`
      <div class="card">
        <img src="img/icons/${ICONS[i.type]||"default"}.png">
        <div class="card-body">
          <div class="item-name">${i.name}</div>
          <div class="category">${i.category} ¬∑ ${i.type}</div>
          <div class="stars">${i.stars} (${rating(i.stars)}/5)</div>
          <div class="roll">${i.roll||"‚Äî"}</div>
          <div class="status ${s}">${i.status}</div>
          <div class="player">Spieler:
            <a href="https://twitch.tv/${i.contact}" target="_blank">${i.contact}</a>
          </div>
          <a class="cta" href="https://twitch.tv/${i.contact}" target="_blank">
            √úber Twitch anfragen
          </a>
        </div>
      </div>`;
  });
}

/* Visitor Counter */
const K="lootliste_visitors",D="lootliste_last_visit";
const t=new Date().toDateString();
if(localStorage.getItem(D)!==t){
  localStorage.setItem(K,(+localStorage.getItem(K)||0)+1);
  localStorage.setItem(D,t);
}
visitorCounter.innerHTML=`üëÅ Besucher gesamt: <b>${localStorage.getItem(K)}</b>`;

search.oninput=render;
statusFilter.onchange=render;
sortRating.onchange=render;
render();
</script>
</body>
</html>
