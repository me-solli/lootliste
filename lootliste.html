<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>üéÅ Community Lootliste</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --bg: #0b0b0b;
      --panel: #1a1a1a;
      --row: #2a2a2a;
      --row-alt: #242424;
      --gold: #d4af37;
      --text: #eaeaea;
      --muted: #aaaaaa;
      --green: #4caf50;
      --red: #e53935;
    }

    body {
      margin: 0;
      padding: 20px;
      background: var(--bg);
      color: var(--text);
      font-family: Arial, Helvetica, sans-serif;
    }

    h1 {
      margin: 0 0 12px 0;
      font-size: 22px;
      color: var(--gold);
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    /* ================= TABLE ================= */
    table {
      width: 100%;
      border-collapse: collapse;
      background: var(--panel);
      font-size: 14px;
    }

    thead {
      background: linear-gradient(#2a230f, #15120a);
    }

    th {
      padding: 10px;
      text-align: left;
      color: var(--gold);
      font-weight: bold;
      border-bottom: 1px solid #3a3a3a;
    }

    td {
      padding: 9px 10px;
      border-bottom: 1px solid #333;
    }

    tbody tr:nth-child(even) { background: var(--row-alt); }
    tbody tr:nth-child(odd) { background: var(--row); }

    .status-ok { color: var(--green); font-weight: bold; }
    .status-no { color: var(--red); font-weight: bold; }

    /* ================= ADMIN ================= */
    .admin {
      margin-top: 30px;
      padding: 16px;
      background: #121212;
      border: 1px solid #333;
      border-radius: 6px;
    }

    .admin h2 {
      margin-top: 0;
      font-size: 18px;
      color: var(--gold);
    }

    .admin-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 10px;
    }

    .admin input, .admin select {
      padding: 7px;
      background: #1e1e1e;
      color: var(--text);
      border: 1px solid #444;
      border-radius: 4px;
    }

    .admin button {
      margin-top: 10px;
      padding: 9px 14px;
      background: var(--gold);
      color: #000;
      font-weight: bold;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .admin button:hover { opacity: 0.9; }

    .hint {
      font-size: 12px;
      color: var(--muted);
      margin-top: 6px;
    }

    /* OBS helper */
    .obs-only h1, .obs-only .admin { display: none; }
  </style>
</head>
<body>
<div class="container">

  <h1>üéÅ Free Community Lootliste (D2R Non-Ladder)</h1>

  <table id="lootTable">
    <thead>
      <tr>
        <th>Item</th>
        <th>Kategorie</th>
        <th>Qualit√§t / Roll</th>
        <th>Kontakt</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- ================= ADMIN BEREICH ================= -->
  <div class="admin">
    <h2>üîß Admin ‚Äì Item hinzuf√ºgen</h2>

    <div class="admin-grid">
      <input id="a_item" placeholder="Itemname" />
      <select id="a_cat">
        <option>Unique</option>
        <option>Set</option>
        <option>Rune</option>
        <option>Charm</option>
        <option>Other</option>
      </select>
      <input id="a_roll" placeholder="Qualit√§t / Roll" />
      <input id="a_contact" placeholder="Kontakt (z.‚ÄØB. me_solli)" />
      <select id="a_status">
        <option value="Verf√ºgbar">Verf√ºgbar</option>
        <option value="Vergeben">Vergeben</option>
      </select>
    </div>

    <button onclick="addItem()">Item hinzuf√ºgen</button>
    <div class="hint">‚ö†Ô∏è Items werden im Browser gespeichert (localStorage). F√ºr OBS ideal.</div>
  </div>
</div>

<script>
  const tableBody = document.querySelector('#lootTable tbody');

  let items = JSON.parse(localStorage.getItem('lootItems')) || [
    { item: 'Trang-Ouls Schuppen', cat: 'Set', roll: '‚Äî', contact: 'me_solli', status: 'Verf√ºgbar' },
    { item: 'Der Erl√∂ser', cat: 'Unique', roll: '281% ED / 75 DMG', contact: 'me_solli', status: 'Verf√ºgbar' },
    { item: 'Ali Baba', cat: 'Unique', roll: '108% / 11 Dex', contact: 'me_solli', status: 'Verf√ºgbar' }
  ];

  function render() {
    tableBody.innerHTML = '';
    items.forEach(i => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${i.item}</td>
        <td>${i.cat}</td>
        <td>${i.roll}</td>
        <td>${i.contact}</td>
        <td class="${i.status === 'Verf√ºgbar' ? 'status-ok' : 'status-no'}">${i.status}</td>
      `;
      tableBody.appendChild(tr);
    });
    localStorage.setItem('lootItems', JSON.stringify(items));
  }

  function addItem() {
    const item = document.getElementById('a_item').value.trim();
    if (!item) return alert('Itemname fehlt');

    items.unshift({
      item,
      cat: document.getElementById('a_cat').value,
      roll: document.getElementById('a_roll').value || '‚Äî',
      contact: document.getElementById('a_contact').value || 'me_solli',
      status: document.getElementById('a_status').value
    });

    document.querySelectorAll('.admin input').forEach(i => i.value = '');
    render();
  }

  render();

  // OBS Mode via ?obs
  if (location.search.includes('obs')) document.body.classList.add('obs-only');
</script>
</body>
</html>
