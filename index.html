<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>üéÅ Free Lootliste ‚Äì Community Items | D2R Non-Ladder</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --gold:#f5c451;
  --bg:#0b0b0b;
  --panel:#141414;
  --border:#262626;
  --green:#4cff4c;
  --yellow:#ffd24c;
  --red:#ff5c5c;
  --purple:#9146FF;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:
    radial-gradient(circle at top,#241507 0%,#090909 55%);
  color:#eaeaea;
}

.wrapper{max-width:1320px;margin:auto}

/* ===== HERO ===== */
.hero{
  position:relative;
  background:url("img/banner-diablo.jpg") center/cover no-repeat;
  border-radius:0 0 24px 24px;
  overflow:hidden;
}
.hero::after{
  content:"";
  position:absolute;inset:0;
  background:
    linear-gradient(to bottom,rgba(0,0,0,.35),#0b0b0b 92%);
}
.hero-inner{
  position:relative;
  z-index:2;
  padding:40px 28px 34px;
  display:flex;
  justify-content:space-between;
  gap:32px;
  flex-wrap:wrap;
}
.hero h1{
  margin:0;
  font-size:30px;
  text-shadow:0 0 12px rgba(245,196,81,.25);
}
.hero p{margin:6px 0 0;opacity:.85}

.cta{
  display:flex;
  gap:14px;
  align-items:center;
  flex-wrap:wrap;
}
.cta a{
  text-decoration:none;
  font-weight:800;
  padding:13px 20px;
  border-radius:14px;
  white-space:nowrap;
}
.cta .primary{
  background:var(--purple);
  color:#fff;
}
.cta .secondary{
  border:1px solid var(--gold);
  color:var(--gold);
}
.cta a:hover{opacity:.9}

/* ===== STATS ===== */
.stats{
  display:flex;
  gap:18px;
  padding:22px 28px 0;
  flex-wrap:wrap;
}
.stat{
  background:linear-gradient(145deg,#181818,#101010);
  border:1px solid var(--border);
  border-radius:14px;
  padding:14px 18px;
  font-size:14px;
}
.stat strong{color:var(--gold)}

/* ===== CONTROLS ===== */
.controls{
  padding:26px 28px 10px;
  display:flex;
  flex-wrap:wrap;
  gap:12px;
}
.controls input,
.controls select,
.controls button{
  background:#111;
  border:1px solid #333;
  color:#fff;
  padding:10px 12px;
  border-radius:12px;
}
.controls button{
  cursor:pointer;
  font-weight:700;
}
.controls button.active{
  border-color:var(--gold);
  color:var(--gold);
}

/* ===== GRID ===== */
.grid{
  padding:10px 28px 30px;
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(300px,1fr));
  gap:18px;
}

.card{
  background:linear-gradient(160deg,#171717,#101010);
  border:1px solid var(--border);
  border-radius:18px;
  padding:16px;
  position:relative;
}
.card::before{
  content:"";
  position:absolute;inset:0;
  border-radius:18px;
  box-shadow:0 0 0 1px rgba(245,196,81,.18) inset;
  pointer-events:none;
}

.badge{
  position:absolute;
  top:12px;right:12px;
  background:var(--gold);
  color:#000;
  font-size:11px;
  font-weight:900;
  padding:4px 9px;
  border-radius:10px;
}

/* card header */
.card-head{
  display:flex;
  gap:12px;
  align-items:center;
}
.icon{
  width:42px;height:42px;
  background:#0d0d0d;
  border:1px solid #333;
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.icon img{
  width:26px;height:26px;
  opacity:.9;
}

.card h3{margin:0;font-size:17px}
.type{font-size:13px;opacity:.7}

.stars{
  color:var(--gold);
  margin:8px 0 4px;
  font-size:15px;
}
.roll{font-size:13px;opacity:.85}

.status{
  margin-top:8px;
  font-weight:800;
}
.verfuegbar{color:var(--green)}
.reserviert{color:var(--yellow)}
.vergeben{color:var(--red)}

.actions{
  margin-top:14px;
}
.actions a{
  display:inline-block;
  background:var(--purple);
  color:#fff;
  text-decoration:none;
  padding:9px 14px;
  border-radius:12px;
  font-size:13px;
  font-weight:800;
}
.actions a:hover{opacity:.9}

/* ===== LIST VIEW ===== */
.list{display:none;padding:0 28px 28px}
table{width:100%;border-collapse:collapse}
th,td{
  border-bottom:1px solid #222;
  padding:10px;
  text-align:left;
}
th{color:var(--gold)}

/* ===== FOOTER ===== */
footer{
  border-top:1px solid #222;
  padding:22px 28px;
  font-size:13px;
}
footer a{
  color:var(--gold);
  margin-right:16px;
  text-decoration:none;
}
footer a:hover{text-decoration:underline}

@media(max-width:700px){
  .hero h1{font-size:24px}
}
</style>
</head>

<body>
<div class="wrapper">

<!-- HERO -->
<section class="hero">
  <div class="hero-inner">
    <div>
      <h1>üéÅ Free Lootliste ‚Äì Community Items</h1>
      <p>Diablo II Resurrected ¬∑ Non-Ladder ¬∑ 100 % Free Loot</p>
    </div>
    <div class="cta">
      <a class="primary" href="https://www.twitch.tv/me_solli" target="_blank">
        Jetzt im Stream abholen
      </a>
      <a class="secondary" href="stream.html">√úber den Stream</a>
    </div>
  </div>
</section>

<!-- STATS -->
<div class="stats">
  <div class="stat">Items gesamt: <strong id="stat-total">0</strong></div>
  <div class="stat">Verf√ºgbar: <strong id="stat-free">0</strong></div>
  <div class="stat">Letzte Aktualisierung: <strong id="stat-update">‚Äî</strong></div>
</div>

<!-- CONTROLS -->
<div class="controls">
  <input id="search" placeholder="Item suchen‚Ä¶">
  <select id="statusFilter">
    <option value="">Alle Status</option>
    <option>Verf√ºgbar</option>
    <option>Reserviert</option>
    <option>Vergeben</option>
  </select>
  <select id="sortStars">
    <option value="desc">‚≠ê Rating ‚Üì</option>
    <option value="asc">‚≠ê Rating ‚Üë</option>
  </select>
  <button id="btnCards" class="active">üß± Cards</button>
  <button id="btnList">üìÑ Liste</button>
</div>

<!-- GRID -->
<div id="grid" class="grid"></div>

<!-- LIST -->
<div id="list" class="list">
  <table>
    <thead>
      <tr>
        <th>Item</th>
        <th>Typ</th>
        <th>Rating</th>
        <th>Roll</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody id="list-body"></tbody>
  </table>
</div>

<footer>
  <a href="impressum.html">Impressum</a>
  <a href="datenschutz.html">Datenschutz</a>
</footer>

</div>

<script type="module">
import items from "./items.js";

/* ===== ICON MAPPING ===== */
const ICONS = {
  schwert:"sword", axt:"axe", dolch:"dagger",
  bogen:"bow", armbrust:"crossbow",
  ruestung:"armor", r√ºstung:"armor",
  helm:"helmet", handschuhe:"gloves",
  stiefel:"boots", schild:"shield",
  ring:"ring", amulett:"amulet",
  charm:"charm", stab:"staff"
};

function iconFor(cat){
  const k = cat.toLowerCase();
  for(const key in ICONS){
    if(k.includes(key)) return ICONS[key];
  }
  return "misc";
}

const grid = document.getElementById("grid");
const listBody = document.getElementById("list-body");
const search = document.getElementById("search");
const statusFilter = document.getElementById("statusFilter");
const sortStars = document.getElementById("sortStars");

const statTotal = document.getElementById("stat-total");
const statFree = document.getElementById("stat-free");
const statUpdate = document.getElementById("stat-update");

function starsCount(s){return (s?.match(/‚òÖ/g)||[]).length}
function isNew(i){
  if(!i.added) return false;
  return (Date.now()-new Date(i.added)) < 1000*60*60*24*7;
}

function render(){
  grid.innerHTML="";
  listBody.innerHTML="";

  let filtered = items.filter(i=>{
    const q = search.value.toLowerCase();
    return (!statusFilter.value || i.status===statusFilter.value) &&
      (i.name.toLowerCase().includes(q) || i.category.toLowerCase().includes(q));
  });

  filtered.sort((a,b)=>{
    if(a.status!==b.status){
      return a.status==="Verf√ºgbar"?-1:1;
    }
    const d = starsCount(b.stars)-starsCount(a.stars);
    return sortStars.value==="desc"?d:-d;
  });

  statTotal.textContent = items.length;
  statFree.textContent = items.filter(i=>i.status==="Verf√ºgbar").length;
  statUpdate.textContent = new Date().toLocaleString("de-DE");

  filtered.forEach(item=>{
    const statusClass =
      item.status==="Reserviert"?"reserviert":
      item.status==="Vergeben"?"vergeben":"verfuegbar";

    const icon = iconFor(item.category);

    // CARD
    const c = document.createElement("div");
    c.className="card";
    c.innerHTML=`
      ${isNew(item)?'<div class="badge">NEU</div>':""}
      <div class="card-head">
        <div class="icon">
          <img src="img/icons/${icon}.webp" onerror="this.src='img/icons/misc.webp'">
        </div>
        <div>
          <h3>${item.name}</h3>
          <div class="type">${item.category}</div>
        </div>
      </div>

      <div class="stars">${"‚òÖ".repeat(starsCount(item.stars))}</div>
      <div class="roll">${item.roll||"‚Äî"}</div>
      <div class="status ${statusClass}">${item.status}</div>

      ${item.status==="Verf√ºgbar" ? `
        <div class="actions">
          <a href="https://www.twitch.tv/me_solli" target="_blank">
            Im Stream anfragen
          </a>
        </div>` : ``}
    `;
    grid.appendChild(c);

    // LIST
    const tr = document.createElement("tr");
    tr.innerHTML=`
      <td>${item.name}</td>
      <td>${item.category}</td>
      <td>${"‚òÖ".repeat(starsCount(item.stars))}</td>
      <td>${item.roll||"‚Äî"}</td>
      <td class="${statusClass}">${item.status}</td>
    `;
    listBody.appendChild(tr);
  });
}

search.addEventListener("input",render);
statusFilter.addEventListener("change",render);
sortStars.addEventListener("change",render);

btnCards.onclick=()=>{
  grid.style.display="grid";
  list.style.display="none";
  btnCards.classList.add("active");
  btnList.classList.remove("active");
};
btnList.onclick=()=>{
  grid.style.display="none";
  list.style.display="block";
  btnList.classList.add("active");
  btnCards.classList.remove("active");
};

render();
</script>

</body>
</html>
