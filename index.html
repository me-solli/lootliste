<!DOCTYPE html>
<!--
  ================================
  LOOTLISTE ‚Äì BLANCO V2 (CLEAN BASE)
  Basis: alte index.html (OPTIK)
  Ziel: saubere Struktur + FAKE-Bl√∂cke
  Keine aktive Logik
  ================================
-->
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Free Lootliste ‚Äì Community Items | D2R Non-Ladder</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ================================
   DESIGN TOKENS (aus alter index)
================================ */
:root{
  --gold:#f5c451;
  --bg:#0b0b0b;
  --panel:#121212;
  --border:#2a2a2a;
  --soft:#1a1a1a;
  --green:#4cff4c;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:radial-gradient(ellipse at top,#181818 0%,#090909 65%);
  color:#eaeaea;
}

.wrapper{max-width:1500px;margin:0 auto}

/* ================================
   HERO (OPTIK FINAL)
================================ */
.hero{
  background:url("img/banner_diablo.png") center top / cover no-repeat;
  border-radius:0 0 26px 26px;
  overflow:hidden;
  min-height:260px;
  position:relative;
}

.hero-inner{
  padding:44px 36px;
  background: linear-gradient(to bottom, rgba(0,0,0,.28), rgba(0,0,0,.70));
}

.hero-logo img{
  max-width:420px;
  width:100%;
  filter:brightness(.82) contrast(1.05)
          drop-shadow(0 0 10px rgba(0,0,0,.6));
}

.hero p{margin:10px 0 18px;opacity:.9}

.mode-banner{
  margin:-6px 0 22px;
  font-size:13px;
  letter-spacing:.3px;
  color:#dcdcdc;
}
.mode-banner strong{color:var(--green)}
.mode-banner span{opacity:.7;font-size:12px}

.hero-stats{
  display:flex;
  gap:18px;
  flex-wrap:wrap;
  font-size:14px;
}
.hero-stats div{
  padding:8px 14px;
  background:rgba(0,0,0,.4);
  border:1px solid var(--border);
  border-radius:999px;
}

.auth-box{
  position:absolute;
  top:22px;
  right:24px;
  display:flex;
  gap:10px;
  align-items:center;
  padding:10px 14px;
  border:1px solid var(--border);
  border-radius:14px;
  background:rgba(0,0,0,.55);
  font-size:13px;
}

.auth-link{
  margin-left:8px;
  font-size:12px;
  color:#f5c451;
  text-decoration:none;
  opacity:.85;
}

.auth-link:hover{
  opacity:1;
  text-decoration:underline;
}

  .auth-sep{
  margin:0 4px;
  opacity:.5;
  font-size:12px;
}

  /* ================================
   TOAST FEEDBACK (MINIMAL)
================================ */
.toast{
  position:fixed;
  bottom:22px;
  left:50%;
  transform:translateX(-50%);
  padding:10px 16px;
  border-radius:999px;
  background:rgba(0,0,0,.75);
  border:1px solid rgba(245,196,81,.4);
  color:#f5c451;
  font-size:13px;
  z-index:9999;
  box-shadow:0 0 18px rgba(245,196,81,.35);
}
  
/* ================================
   PROJECT TIMELINE (OPTIK)
================================ */
.project-timeline{
  padding:10px 28px 12px;
  background:linear-gradient(
    180deg,
    rgba(0,0,0,.28),
    rgba(0,0,0,0)
  );
}

/* Label */
.timeline-label{
  padding:4px 0 6px;
  font-size:12px;
  color:#bfa86a;
  opacity:.75;
}

/* Track */
.timeline-track{
  height:1px;
  background:#2a2a2a;
  position:relative;
  margin-bottom:10px;
}

.timeline-progress{
  position:absolute;
  left:0;
  top:0;
  height:1px;
  width:75%;
  background:linear-gradient(90deg,#bfa86a,#6f7f4a);
}

/* Steps */
.timeline-steps{
  display:flex;
  justify-content:space-between;
  margin-bottom:14px;
}

.timeline-step{
  width:14px;
  height:14px;
  border-radius:50%;
  background:#2a2a2a;
}

.timeline-step.done{background:#bfa86a}
.timeline-step.current{background:#6f7f4a}
.timeline-step.future{background:#333;opacity:.5}

/* ================================
   RULES / FLOW BOX (IN TIMELINE)
================================ */
.rules-box{
  margin-top:6px;
  padding:14px 18px;
  border:1px solid rgba(191,168,106,.35);
  border-radius:14px;
  font-size:13px;
  background:rgba(0,0,0,.25);
  box-shadow:
    inset 0 0 12px rgba(191,168,106,.08);
  opacity:.9;
}

.rules-box strong{
  display:block;
  margin-bottom:6px;
  color:#bfa86a;
  font-weight:600;
}

.rules-box p{
  margin:6px 0;
  line-height:1.45;
}

.rules-link{
  display:inline-block;
  margin-top:6px;
  color:var(--gold);
  text-decoration:none;
  font-weight:500;
}

.rules-link:hover{
  text-decoration:underline;
}

/* ================================
   ICON BAR (DIABLO ‚Äì RUHIG & EINGEBETTET)
================================ */

.icon-bar{
  display:flex;
  gap:12px;
  padding:24px 28px 26px;
  overflow-x:auto;
  background:transparent;
  border-bottom:1px solid rgba(255,255,255,.06);

  justify-content:center; /* üëà neu */
}

/* ================================
   ICON BUTTON ‚Äì BASIS (RUHIG, EINGEBETTET)
================================ */

.icon-btn{
  min-width:96px;
  text-align:center;
  padding:14px 10px 12px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.08);
  background:transparent;
  transition:
    border-color .25s ease,
    box-shadow .25s ease;
}

/* Icon */
.icon-btn img{
  width:68px;
  height:68px;
  margin-bottom:10px;
  opacity:.8;
  filter:
    drop-shadow(0 0 4px rgba(0,0,0,.9));
  transition:
    opacity .3s ease,
    filter .3s ease;
}

/* Label */
.icon-btn span{
  display:block;
  font-size:13px;
  letter-spacing:.3px;
  color:#d2d2d2;
  opacity:.8;
}

/* ================================
   HOVER ‚Äì LEICHTE ORIENTIERUNG
================================ */

.icon-btn:hover{
  border-color:rgba(255,215,120,.25);
  box-shadow:0 0 6px rgba(255,215,120,.15);
}

.icon-btn:hover img{
  opacity:.95;
  filter:
    drop-shadow(0 0 6px rgba(255,215,120,.25))
    drop-shadow(0 0 14px rgba(0,0,0,.9));
}

/* ================================
   ACTIVE ‚Äì LEISER STATUS (KEIN CTA)
================================ */

.icon-btn.active{
  border-color:rgba(255,215,120,.28);
  box-shadow:0 0 6px rgba(255,215,120,.18);
}

.icon-btn.active img{
  filter:
    drop-shadow(0 0 14px rgba(255,215,120,.65))
    drop-shadow(0 0 22px rgba(0,0,0,.95));
}

/* ================================
   ICON BAR ‚Äì SCROLL FEINSCHLIFF
================================ */

.icon-bar{
  scrollbar-width:thin;
  scrollbar-color:rgba(245,196,81,.35) transparent;
}

.icon-bar::-webkit-scrollbar{
  height:6px;
}

.icon-bar::-webkit-scrollbar-track{
  background:transparent;
}

.icon-bar::-webkit-scrollbar-thumb{
  background:rgba(245,196,81,.3);
  border-radius:6px;
}

/* ================================
   CONTENT / META / FILTER
================================ */
.container{padding:30px}
.meta-bar{display:flex;gap:18px;margin-bottom:18px;font-size:13px}
 .filter-panel{background:#121212;border:1px solid var(--border);border-radius:18px;padding:18px;margin-bottom:18px}
.filter-panel input,.filter-panel select{padding:10px 12px;background:#111;border:1px solid #333;color:#fff;border-radius:10px}

/* ================================
   CARDS (OPTIK BASIS ‚Äì KOMPAKT)
================================ */
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(360px, 1fr));
  gap:18px;
}

.card{
  display:flex;
  background:linear-gradient(180deg,#191919,#0f0f0f);
  border:1px solid var(--border);
  border-radius:20px;
  overflow:hidden;
}

.card-image{
  width:120px;
  background:#0b0b0b;
  display:flex;
  align-items:center;
  justify-content:center;
}

.card-image img{
  width:72px;
  height:72px;
}

.card-body{
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:6px;
}

.item-name{
  font-size:16px;
  font-weight:600;
}

.item-sub{
  font-size:11px;
  color:#8a8a8a;
  letter-spacing:.6px;
  text-transform:uppercase;
}

.stars{
  color:var(--gold);
}

.player{
  font-size:13px;
  opacity:.85;
}

/* ================================
   FAKE BLOCKS (VISUAL)
================================ */
.fake-block{
  margin:16px 0;
  padding:14px 16px;
  border:1px dashed rgba(255,255,255,.15);
  border-radius:12px;
  font-size:13px;
  color:#bbb;
  background:rgba(255,255,255,.03);
}
.fake-block strong{color:var(--gold)}

/* ================================
   FOOTER
================================ */
.footer{margin-top:50px;padding:22px;border-top:1px solid #222;font-size:13px;text-align:center}
.footer a{color:var(--gold);text-decoration:none}

  /* ================================
   FILTER UI (BASIC)
================================ */
.filter-row{
  display:flex;
  gap:14px;
  flex-wrap:wrap;
}

.filter-row input{
  flex:1;
  min-width:220px;
}

.filter-row select{
  min-width:160px;
}

.hero-stat{
  padding:8px 14px;
  background:rgba(0,0,0,.4);
  border:1px solid var(--border);
  border-radius:999px;
}

  .auth-box img{
  border-radius:50%;
}

.auth-btn{
  padding:6px 10px;
  border-radius:10px;
  border:1px solid var(--border);
  background:#111;
  color:#fff;
  font-size:12px;
  cursor:pointer;
}

  /* ================================
   SCREENSHOT OVERLAY
================================ */
.overlay{
  position:fixed;
  inset:0;
  z-index:9999;
}

.overlay-backdrop{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.75);
}

.overlay-content{
  position:relative;
  z-index:1;
  display:flex;
  align-items:center;
  justify-content:center;
  height:100%;
}

.overlay-content img{
  max-width:90%;
  max-height:90%;
  border-radius:12px;
  box-shadow:0 0 40px rgba(0,0,0,.8);
}

  .footer-meta{
  margin-top:10px;
  opacity:.75;
  font-size:12px;
}

  /* ================================
   UX ‚Äì ICON BAR FEEDBACK
================================ */
.icon-btn{
  cursor:pointer;
  transition:transform .15s ease, background .15s ease, border-color .15s ease;
}

.icon-btn:hover{
  transform:translateY(-2px);
  background:rgba(255,255,255,.04);
}

.icon-btn.active{
  border-color:var(--gold);
  background:rgba(245,196,81,.08);
}

  /* ================================
   UX ‚Äì CARDS HOVER & CLICK
================================ */
.card{
  cursor:pointer;
  transition:transform .15s ease, box-shadow .15s ease;
}

.card:hover{
  transform:translateY(-3px);
  box-shadow:0 10px 30px rgba(0,0,0,.4);
}

.card-image{
  cursor:zoom-in;
}

  /* ================================
   UX ‚Äì FILTER FOCUS
================================ */
.filter-panel input:focus,
.filter-panel select:focus{
  outline:none;
  border-color:var(--gold);
  box-shadow:0 0 0 1px rgba(245,196,81,.3);
}

  /* ================================
   UX ‚Äì RESULTS INFO
================================ */
.results-info{
  margin:-6px 0 12px;
  font-size:13px;
  opacity:.75;
}

  /* ================================
   UX ‚Äì SKELETON LOADING
================================ */
.skeletons{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:22px;
}

.skeleton-card{
  height:140px;
  border-radius:20px;
  background:linear-gradient(
    90deg,
    #1a1a1a 25%,
    #222 37%,
    #1a1a1a 63%
  );
  background-size:400% 100%;
  animation:skeleton 1.2s ease-in-out infinite;
}

@keyframes skeleton{
  0%{background-position:100% 0}
  100%{background-position:0 0}
}

  /* ================================
   UX ‚Äì CARD FADE IN
================================ */
.card{
  opacity:0;
  transform:translateY(6px);
  animation:cardFade .35s ease forwards;
}

@keyframes cardFade{
  to{
    opacity:1;
    transform:translateY(0);
  }
}

  /* ================================
   ICON BAR ‚Äì GOLD FRAME + GLOW
================================ */
.icon-btn{
  position:relative;
  border:1px solid rgba(245,196,81,.25);
  border-radius:14px;
  padding:10px 12px;
  transition:
    border-color .2s ease,
    box-shadow .2s ease,
    transform .15s ease,
    background .2s ease;
}

/* Hover ‚Äì dezenter Goldschein */
.icon-btn:hover{
  border-color:rgba(245,196,81,.6);
  box-shadow:
    0 0 0 1px rgba(245,196,81,.25),
    0 0 14px rgba(245,196,81,.25);
}

/* Active ‚Äì klarer Diablo-Gold-Look */
.icon-btn.active{
  border-color:var(--gold);
  background:rgba(245,196,81,.08);
  box-shadow:
    0 0 0 1px rgba(245,196,81,.6),
    0 0 18px rgba(245,196,81,.55),
    inset 0 0 12px rgba(245,196,81,.15);
}

/* Icon leicht hervorheben */
.icon-btn.active img{
  filter:drop-shadow(0 0 6px rgba(245,196,81,.8));
}

/* ================================
   SLOGAN LINE (DIABLO STYLE)
================================ */
.slogan-line{
  margin:28px 0 36px;
  padding:14px 0;
  text-align:center;
  font-size:18px;
  letter-spacing:1.1px;
  opacity:.9;
  color:#e0e0e0;

  background:
    linear-gradient(
      90deg,
      transparent,
      rgba(255,255,255,.06),
      transparent
    );
}

  /* ================================
   FOOTER LINKS
================================ */
.footer-links{
  margin-bottom:8px;
}

.footer-links a{
  color:#aaa;
  text-decoration:none;
  font-size:12px;
}

.footer-links a:hover{
  color:var(--gold);
  text-decoration:underline;
}

.footer-links span{
  margin:0 6px;
  opacity:.5;
}

.footer-note{
  font-size:11px;
  opacity:.55;
}

/* ================================
   PROJECT STATUS (CLEAN)
================================ */
.project-status{
  margin:24px 28px 10px;
  padding:14px 18px;
  border:1px solid rgba(255,255,255,.08);
  border-radius:14px;
  background:rgba(255,255,255,.03);
}

.status-line{
  display:flex;
  align-items:center;
  gap:10px;
  font-size:13px;
  color:#cfcfcf;
}

.status-dot{
  width:8px;
  height:8px;
  border-radius:50%;
  background:#6f7f4a; /* ruhiges Gr√ºn */
  box-shadow:0 0 6px rgba(111,127,74,.6);
}

.status-text strong{
  color:#e6e6e6;
  font-weight:600;
}

.status-note{
  margin-top:6px;
  font-size:12px;
  color:#9a9a9a;
  line-height:1.4;
}

  /* ================================
   FILTER + SLOGAN FLOW
================================ */
.filter-slogan-wrap{
  margin: 18px 28px 6px;
  padding: 10px 14px 14px;
  border-radius: 18px;
  background:
    linear-gradient(
      to bottom,
      rgba(255,255,255,.04),
      rgba(255,255,255,0)
    );
}

.loot-slogan{
  text-align:center;
  font-size:14px;
  letter-spacing:.2px;
  color:#cfcfcf;
  opacity:.9;
}

/* Icon-Bar sanfter andocken */
.icon-bar{
  margin-top: 10px;
}

.icon-btn{
  background: rgba(255,255,255,.03);
  border-color: rgba(255,255,255,.08);
}

.icon-btn.active{
  background: rgba(255,215,120,.10);
}

/* ================================
   CARDS ‚Äì VISUAL CLEANUP (FINAL)
================================ */

/* Grid ruhiger */
.cards{
  gap:18px;
}

/* Card-Grundstil */
.card{
  background:linear-gradient(
    to bottom,
    rgba(255,255,255,.045),
    rgba(255,255,255,.02)
  );
  border:1px solid rgba(255,255,255,.06);
  border-radius:20px;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.02);
  transition:background .2s ease, border-color .2s ease;
}

/* Hover = minimal, kein Aufpoppen */
.card:hover{
  background:linear-gradient(
    to bottom,
    rgba(255,255,255,.06),
    rgba(255,255,255,.025)
  );
  border-color:rgba(255,255,255,.10);
}

/* Bild ruhig einbetten */
.card-image img{
  border-radius:14px;
  background:rgba(0,0,0,.25);
}

/* ================================
   TEXT-HIERARCHIE
================================ */

.item-name{
  font-size:17px;
  font-weight:600;
  margin-bottom:4px;
}

/* Diablo-Qualit√§tsfarben */
.quality-unique{
  color:#c7a44a; /* Gold */
}

.quality-set{
  color:#4cff4c; /* Gr√ºn */
}

.quality-rare{
  color:#f0e68c; /* Gelb */
}

.quality-magic{
  color:#6fa8ff; /* Blau */
}

.quality-normal{
  color:#f0f0f0;
}

.item-sub{
  font-size:11px;
  text-transform:uppercase;
  letter-spacing:.6px;
  color:#b5b5b5;
}

.item-roll{
  font-size:13px;
  color:#cfcfcf;
}

/* Spender bewusst zur√ºckgenommen */
.player{
  font-size:12px;
  color:#9a9a9a;
}

  /* ================================
   ICON BAR ‚Äì ALL BUTTON TUNING
================================ */
.icon-btn[data-type=""]{
  background: rgba(255,255,255,.015);
  border-color: rgba(255,255,255,.06);
}

.icon-btn[data-type=""].active{
  background: rgba(255,255,255,.04);
  border-color: rgba(255,255,255,.12);
  box-shadow: none;
}

  /* ================================
   ICON BAR ‚Üí SEARCH SPACING
================================ */
.filter-slogan-wrap{
  margin-bottom:22px;
}

.filter-bar,
.search-bar{
  margin-top:16px;
}

  /* ================================
   VISITOR COUNTER ‚Äì CLEAN BADGE
================================ */
.visitor-badge{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:6px 12px;
  border-radius:999px;
  background:rgba(0,0,0,.45);
  border:1px solid rgba(255,255,255,.08);
  font-size:12px;
  color:#cfcfcf;
}

.visitor-icon{
  opacity:.85;
}

.visitor-label{
  color:#9a9a9a;
}

.visitor-count{
  font-weight:600;
  color:#e6e6e6;
}

  /* ================================
   VISITOR BADGE ‚Äì SPACING
================================ */
#visitorCounter{
  margin-top: 10px;
}

  .hero-stats{
  gap: 14px;
}

/* ================================
   AUTH BOX ‚Äì STACKED (VARIANTE A)
================================ */

.auth-box--stacked{
  align-items:flex-start;
}

.auth-meta{
  display:flex;
  flex-direction:column;
  gap:4px;
}

.auth-name{
  font-size:13px;
  font-weight:600;
}

.auth-submit{
  font-size:12px;
  color:var(--gold);
  text-decoration:none;
  opacity:.9;
}

.auth-submit:hover{
  text-decoration:underline;
  opacity:1;
}

.auth-links{
  font-size:12px;
  opacity:.75;
}

.auth-links a{
  color:#eaeaea;
  text-decoration:none;
}

.auth-links a:hover{
  text-decoration:underline;
}

  /* ================================
   CARD HEADER (COLLAPSED VIEW)
================================ */

.card-header{
  all: unset;
  display: flex;
  align-items: center;
  gap: 14px;
  width: 100%;
  padding: 14px 16px;
  cursor: pointer;
}

.card-header:hover{
  background: rgba(255,255,255,.03);
}

/* Pfeil */
.card-chevron{
  font-size: 14px;
  color: #9a9a9a;
  transition: transform .25s ease;
  flex-shrink: 0;
}

/* Titel-Block */
.card-title{
  display: flex;
  flex-direction: column;
  gap: 3px;
}

/* Kategorie */
.item-category{
  font-size: 11px;
  letter-spacing: .5px;
  text-transform: uppercase;
  color: #9a9a9a;
}

/* ================================
   CARD DETAILS (EXPANDABLE)
================================ */

.card-details{
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  transition:
    max-height .35s ease,
    opacity .25s ease;
  padding: 0 16px;
}

/* OFFEN */
.card[data-open="true"] .card-details{
  max-height: 520px;
  opacity: 1;
  padding-bottom: 16px;
}

/* Pfeil drehen */
.card[data-open="true"] .card-chevron{
  transform: rotate(90deg);
}

/* ================================
   DETAILS CONTENT
================================ */

.card-details .card-image{
  margin-top: 10px;
}

.card-details .card-image img{
  width: 100%;
  max-width: 220px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.08);
}

/* Body spacing */
.card-details .card-body{
  margin-top: 10px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* Claim Row */
.claim-row{
  margin-top: 6px;
}

/* ================================
   RUHIGER COLLAPSED LOOK
================================ */

/* wenn geschlossen ‚Üí KEIN Hover-Push */
.card[data-open="false"]:hover{
  transform: none;
  box-shadow: none;
}

/* ================================
   MOBILE FEINSCHLIFF
================================ */

@media (max-width: 900px){
  .cards{
    grid-template-columns: 1fr;
  }
}

  /* ================================
   ITEM TYPE ICON (CARD HEADER)
================================ */

.item-type-icon{
  width: 48px;
  height: 48px;
  opacity: .95;
  filter:
    drop-shadow(0 0 6px rgba(0,0,0,.85));
  flex-shrink: 0;
}
  
</style>
</head>

<body>
<div class="wrapper">

<!-- ================================
     HERO
================================ -->
<header class="hero">
  <div class="hero-inner">

<div class="auth-box auth-box--stacked">
  <img src="img/avatars/default.png" alt="Avatar" width="28" height="28">

  <div class="auth-meta">
    <span
      class="auth-name"
      id="playerIdLabel"
      data-placeholder="Spieler l√§dt‚Ä¶"
    ></span>

    <a href="submit.html" class="auth-submit">
      + Item einreichen
    </a>

    <div class="auth-links">
      <a href="my-items.html">Meine Items</a>
      <span>¬∑</span>
      <a href="my-claims.html">Meine Claims</a>
      <span>¬∑</span>
      <a href="archive.html">Archiv</a>
    </div>
  </div>
</div>

    <h1 class="hero-logo">
      <img src="img/logo_d2r.png" alt="D2R Lootliste Logo">
    </h1>

    <p>Community Lootliste ¬∑ Diablo II Resurrected</p>

    <div class="mode-banner">
      Aktueller Modus: <strong>NON-LADDER</strong>
      <span>¬∑ Ladder in Vorbereitung</span>
    </div>

<div class="hero-stats">
  <div class="hero-stat">
    üì¶ <strong id="heroItemCount">3</strong> Drops
  </div>

  <div class="hero-stat">
    üü¢ <strong>Community-Betrieb</strong>
  </div>

  <div class="hero-stat">
    üßç <strong id="heroDonorCount">3</strong> Spender
  </div>
</div>

<!-- VISITOR COUNTER -->
<div id="visitorCounter" class="visitor-badge">
  <span class="visitor-icon">üëÅÔ∏è</span>
  <span class="visitor-label">Besucher</span>
  <strong class="visitor-count">26</strong>
</div>

  </div>
</header>

<!-- ================================
     PROJECT STATUS (MINIMAL)
================================ -->
<section class="project-status">

  <div class="status-line">
    <span class="status-dot"></span>
    <span class="status-text">
      Projektstatus: <strong>Community-Betrieb</strong>
    </span>
  </div>

  <div class="status-note">
    Diese Lootliste befindet sich im aktiven Community-Betrieb.
    Der Funktionsumfang ist bewusst schlank gehalten und auf
    √úbersicht, Fairness und Stabilit√§t ausgelegt.
  </div>

</section>

<!-- ================================
     ICON BAR
================================ -->
<nav class="icon-bar">

  <div class="icon-btn" data-type="waffe">
    <img src="img/icons/waffe.png" alt="Waffe">
    <span>Waffe</span>
  </div>

  <div class="icon-btn" data-type="helm">
    <img src="img/icons/helm.png" alt="Helm">
    <span>Helm</span>
  </div>

  <div class="icon-btn" data-type="ruestung">
    <img src="img/icons/ruestung.png" alt="R√ºstung">
    <span>R√ºstung</span>
  </div>

  <div class="icon-btn" data-type="schild">
    <img src="img/icons/schild.png" alt="Schild">
    <span>Schild</span>
  </div>

  <div class="icon-btn" data-type="guertel">
    <img src="img/icons/guertel.png" alt="G√ºrtel">
    <span>G√ºrtel</span>
  </div>

  <div class="icon-btn" data-type="handschuhe">
    <img src="img/icons/handschuhe.png" alt="Handschuhe">
    <span>Handschuhe</span>
  </div>

  <div class="icon-btn" data-type="schuhe">
    <img src="img/icons/schuhe.png" alt="Schuhe">
    <span>Schuhe</span>
  </div>

  <div class="icon-btn" data-type="amulett">
    <img src="img/icons/amulett.png" alt="Amulett">
    <span>Amulett</span>
  </div>

  <div class="icon-btn" data-type="ring">
    <img src="img/icons/ring.png" alt="Ring">
    <span>Ring</span>
  </div>

  <div class="icon-btn" data-type="charm">
    <img src="img/icons/charm.png" alt="Charm">
    <span>Charm</span>
  </div>

  <div class="icon-btn" data-type="rune">
    <img src="img/icons/rune.png" alt="Rune">
    <span>Rune</span>
  </div>

  <div class="icon-btn" data-type="sonstiges">
    <img src="img/icons/sonstiges.png" alt="Sonstiges">
    <span>Sonstiges</span>
  </div>

</nav>

<!-- ================================
     SLOGAN
================================ -->
<div class="filter-slogan-wrap">
  <div class="loot-slogan">
    ü©∏ ‚Äî üó°Ô∏è Kein Kampf.   Kein Blut.   Nur Loot. üó°Ô∏è ‚Äî ü©∏
  </div>
</div>


<!-- ================================
     CONTENT
================================ -->
<div class="container">

  <!-- META / RESULTS -->
  <div class="meta-bar">

    <div class="meta-left">
      üì¶ <strong id="metaItemCount">0</strong> Items
    </div>

    <div class="meta-right">
      üïí Stand: <span id="metaDate">‚Äì</span>
    </div>

    <div id="resultsInfo" class="results-info">
      <span id="resultsCount">0</span> Items gefunden
    </div>

  </div>

  <!-- FILTER -->
  <div class="filter-panel">
    <div class="filter-row">

      <input
        type="text"
        id="filterSearch"
        placeholder="Item suchen ‚Ä¶"
        autocomplete="off"
      >

      <select id="filterSort">
        <option value="rating-desc">Rating ‚Üì</option>
        <option value="rating-asc">Rating ‚Üë</option>
        <option value="name-asc">Name A‚ÄìZ</option>
        <option value="name-desc">Name Z‚ÄìA</option>
      </select>

    </div>
  </div>

</div>

<!-- ================================
     CARDS
================================ -->
<section class="cards">

  <!-- SKELETON LOADING -->
  <div id="skeletons" class="skeletons">
    <div class="skeleton-card"></div>
    <div class="skeleton-card"></div>
    <div class="skeleton-card"></div>
  </div>

  <!-- EMPTY STATE -->
  <div id="emptyState" class="empty-state" hidden>
    Keine Items gefunden.
  </div>

</section>

</div>
<!-- ================================
     FOOTER
================================ -->
<footer class="footer">

  <div class="footer-links">
    <a href="ueber-das-projekt.html">√úber das Projekt</a>
    <span>¬∑</span>
    <a href="entwickler.html">√úber den Entwickler</a>
    <span>¬∑</span>
    <a href="impressum.html">Impressum</a>
    <span>¬∑</span>
    <a href="datenschutz.html">Datenschutz</a>
  </div>

  <div class="footer-meta">
    <span>Community-Projekt</span>
    <span>¬∑</span>
    <span>Diablo II: Resurrected</span>
    <span>¬∑</span>
    <span><strong>Non-Ladder</strong></span>
  </div>

</footer>

<!-- ================================
     FAKE: SCREENSHOT_OVERLAY
================================ -->
<div id="screenshotOverlay" class="overlay" hidden>

  <div class="overlay-backdrop"></div>

  <div class="overlay-content">
    <img
      id="overlayImage"
      src=""
      alt="Screenshot Vorschau"
    >
  </div>

</div>

</div>

  <script>
/* ===== SCREENSHOT OVERLAY (CLICK TO OPEN) ===== */
(function () {
  const overlay   = document.getElementById("screenshotOverlay");
  const imgTarget = document.getElementById("overlayImage");
  if (!overlay || !imgTarget) return;

  // √ñffnen: Klick auf Card-Image
  document.addEventListener("click", (e) => {
    const img = e.target.closest(".card-image img");
    if (!img) return;

    // Quelle bestimmen:
    // 1) data-full (falls sp√§ter vorhanden)
    // 2) src des Icons (Fallback)
    const fullSrc = img.dataset.full || img.src;
    imgTarget.src = fullSrc;

    overlay.hidden = false;
  });

  // Schlie√üen: Klick auf Backdrop oder ESC
  overlay.addEventListener("click", (e) => {
    if (e.target.classList.contains("overlay-backdrop")) {
      close();
    }
  });

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") close();
  });

  function close(){
    overlay.hidden = true;
    imgTarget.src = "";
  }
})();
</script>

<script type="module">
  import { renderCards } from "./render.cards.js";

// ===============================
// SEASON (ZENTRAL)
// ===============================
const ACTIVE_SEASON = "non-ladder";

// üîå API (WICHTIG: Modul-Scope!)
const API = "https://lootliste-production.up.railway.app";
  
  const currentAccountId =
  localStorage.getItem("lootliste_account_id") || null;

// DOM
const container = document.querySelector(".cards");
const skeletons = document.getElementById("skeletons");

// Meta / Hero
const metaCount = document.getElementById("metaItemCount");
const metaDate  = document.getElementById("metaDate");
const heroCount = document.getElementById("heroItemCount");
const heroAvg   = document.getElementById("heroAvgRating");
const heroDonor = document.getElementById("heroDonorCount");

// Results / Empty
const resultsInfo  = document.getElementById("resultsInfo");
const resultsCount = document.getElementById("resultsCount");
const emptyState   = document.getElementById("emptyState");

// State
const state = {
  items: [],
  filtered: [],
  type: "",
  search: "",
  sort: "rating-desc"
};

async function loadItems() {
  const res = await fetch(API + "/items", {
    headers: {
      "X-User-Id": localStorage.getItem("lootliste_user_id") || "",
      "X-Account-Id": localStorage.getItem("lootliste_account_id") || ""
    }
  });

  // üîê Device-ID aus Header ODER LocalStorage setzen
  const headerUid = res.headers.get("X-User-Id");
  if (headerUid) {
    localStorage.setItem("lootliste_user_id", headerUid);
  }

const data = await res.json();

// üîí √ñffentliche Liste:
// nur verf√ºgbare Items DER AKTIVEN SEASON
state.items = data
  .filter(i =>
    i.status === "verf√ºgbar" &&
    (i.season ?? "non-ladder") === ACTIVE_SEASON
  )
  .map(item => ({
    ...item,
    isOwner:
      currentAccountId &&
      item.donorAccountId === currentAccountId
  }));

state.filtered = [...state.items];

// Username laden
await setUserLabel();
}

// üë§ Anzeige: Username (falls Account) ‚Üí sonst Gast
async function setUserLabel() {
  const label = document.getElementById("playerIdLabel");
  const submitLink = document.querySelector(".auth-submit");

  if (!label) return;

  const deviceId  = localStorage.getItem("lootliste_user_id");
  const accountId = localStorage.getItem("lootliste_account_id");

  label.textContent = label.dataset.placeholder || "Spieler l√§dt‚Ä¶";
  if (submitLink) submitLink.style.display = "none";

  const headers = {};
  if (deviceId)  headers["X-User-Id"] = deviceId;
  if (accountId) headers["X-Account-Id"] = accountId;

  try {
    const res = await fetch(API + "/me", { headers });
    const data = await res.json();

    if (data.username) {
      label.textContent = data.username;
      if (submitLink) submitLink.style.display = "";
    } else {
      label.textContent = "Gast";
    }
  } catch {
    label.textContent = "Gast";
  }
}

function updateMeta() {
  const list = state.filtered;

  // Counts
  metaCount && (metaCount.textContent = list.length);
  heroCount && (heroCount.textContent = list.length);

  // Avg rating
  if (heroAvg) {
    const ratings = list.map(i => i.rating).filter(Boolean);
    heroAvg.textContent = ratings.length
      ? (ratings.reduce((a,b)=>a+b,0) / ratings.length).toFixed(1)
      : "‚Äì";
  }

  // Unique donors
  if (heroDonor) {
    const donors = new Set(list.map(i => i.donor).filter(Boolean));
    heroDonor.textContent = donors.size;
  }

  // Date
  metaDate && (metaDate.textContent =
    new Date().toLocaleDateString("de-DE")
  );
}

  function updateResultsUI() {
    const count = state.filtered.length;

    // Results info
    if (resultsInfo && resultsCount) {
      resultsCount.textContent = count;
      resultsInfo.style.display = count === 0 ? "none" : "";
    }

    // Empty state
    if (emptyState) {
      emptyState.hidden = count !== 0;
    }
  }

function applyFilters() {
  let list = [...state.items];

// Type (robust: type first, fallback category)
if (state.type) {
  list = list.filter(i => {
    const t = (i.type || i.category || "").toLowerCase();
    return t === state.type;
  });
}

  // Search
  if (state.search) {
    const q = state.search.toLowerCase();
    list = list.filter(i => (i.name || "").toLowerCase().includes(q));
  }

  // Sort
  if (state.sort === "rating-desc") {
    list.sort((a, b) => (b.rating || 0) - (a.rating || 0));
  }

  if (state.sort === "rating-asc") {
    list.sort((a, b) => (a.rating || 0) - (b.rating || 0));
  }

  state.filtered = list;
  renderCards(state.filtered, container);
  updateMeta();
  updateResultsUI();
}

  // Initial render
setTimeout(async () => {
  skeletons?.remove();
  await loadItems();
  applyFilters();
}, 400);

  // Search
  const searchInput = document.getElementById("filterSearch");
  searchInput?.addEventListener("input", () => {
    state.search = searchInput.value;
    applyFilters();
  });

  // Sort
  const sortSelect = document.getElementById("filterSort");
  sortSelect?.addEventListener("change", () => {
    state.sort = sortSelect.value;
    applyFilters();
  });

  // Icon bar
  const iconBar = document.querySelector(".icon-bar");
  iconBar?.addEventListener("click", e => {
    const btn = e.target.closest(".icon-btn");
    if (!btn) return;

    const type = btn.dataset.type || "";

    iconBar.querySelectorAll(".icon-btn")
      .forEach(b => b.classList.remove("active"));

    state.type = state.type === type ? "" : type;
    if (state.type) btn.classList.add("active");

    applyFilters();
  });

</script>

  <script>
function showToast(text){
  const t = document.getElementById("toast");
  if (!t) return;

  t.textContent = text;
  t.hidden = false;

  setTimeout(() => {
    t.hidden = true;
  }, 2200);
}
</script>

  <div id="toast" class="toast" hidden></div>
  
</body>
</html>
