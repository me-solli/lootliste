<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>üéÅ Free Lootliste ‚Äì Community Items | D2R Non-Ladder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    :root{
      --bg:#0b0b0b;
      --soft:#151515;
      --border:#222;
      --gold:#f5c451;
      --text:#eaeaea;
      --muted:#bdbdbd;
      --green:#4cff4c;
      --red:#ff5c5c;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Arial,Helvetica,sans-serif;
      background:var(--bg);
      color:var(--text);
    }
    .wrapper{
      max-width:1200px;
      margin:0 auto;
      padding:0 16px 40px;
    }

    /* ===== HERO ===== */
    .hero{
      margin-top:24px;
      border-radius:18px;
      overflow:hidden;
    }
    .hero-inner{
      position:relative;
      min-height:220px;
      background:url("./img/banner-diablo.jpg") center/cover no-repeat;
    }
    .hero-overlay{
      position:absolute;
      inset:0;
      background:linear-gradient(180deg,rgba(0,0,0,.55),rgba(0,0,0,.9));
    }
    .hero-content{
      position:relative;
      z-index:2;
      padding:28px;
      display:flex;
      gap:20px;
      align-items:center;
    }
    .hero-content img{
      width:64px;height:64px;
    }
    .hero h1{
      margin:0;
      font-size:28px;
      color:#fff;
    }
    .hero p{
      margin:6px 0 0;
      color:var(--muted);
      font-size:14px;
    }
    .stream-status{
      margin-top:8px;
      font-size:13px;
      color:var(--green);
      font-weight:bold;
    }

    /* ===== CONTROLS ===== */
    .controls{
      margin-top:20px;
      display:flex;
      gap:12px;
      flex-wrap:wrap;
    }
    input,select{
      background:var(--soft);
      border:1px solid var(--border);
      color:var(--text);
      padding:8px 10px;
      border-radius:8px;
      font-size:14px;
    }

    /* ===== TABLE ===== */
    table{
      width:100%;
      margin-top:20px;
      border-collapse:collapse;
      background:var(--soft);
      border:1px solid var(--border);
      border-radius:14px;
      overflow:hidden;
    }
    thead th{
      padding:12px;
      text-align:left;
      font-size:13px;
      color:var(--gold);
      border-bottom:1px solid var(--border);
    }
    tbody td{
      padding:10px 12px;
      border-bottom:1px solid #1e1e1e;
      font-size:14px;
    }
    tbody tr:hover{background:#191919}
    .item-name{font-weight:bold;color:#fff}
    .stars{color:var(--gold)}
    .status.verfuegbar{color:var(--green);font-weight:bold}
    .status.vergeben{color:var(--red);font-weight:bold}

    /* ===== FOOTER ===== */
    footer{
      margin-top:40px;
      padding-top:20px;
      border-top:1px solid var(--border);
      font-size:13px;
    }
    footer a{
      color:var(--gold);
      margin-right:16px;
      text-decoration:none;
    }
    footer a:hover{text-decoration:underline}

    /* ===== EDIT MODE ===== */
    .edit-hint{
      margin-top:10px;
      font-size:12px;
      color:#777;
    }
  </style>
</head>

<body>
<div class="wrapper">

  <section class="hero">
    <div class="hero-inner">
      <div class="hero-overlay"></div>
      <div class="hero-content">
        <img src="./img/logo-rune.png" alt="Logo">
        <div>
          <h1>üéÅ Free Lootliste ‚Äì Community Items</h1>
          <p>Diablo II: Resurrected ¬∑ Non-Ladder ¬∑ kostenlos f√ºr die Community</p>
          <div class="stream-status">üü¢ Stream: Offline</div>
        </div>
      </div>
    </div>
  </section>

  <div class="controls">
    <input id="search" placeholder="Item suchen ‚Ä¶">
    <select id="statusFilter">
      <option value="all">Alle Status</option>
      <option value="Verf√ºgbar">Verf√ºgbar</option>
      <option value="Vergeben">Vergeben</option>
    </select>
    <select id="sortStars">
      <option value="none">Keine Sortierung</option>
      <option value="desc">‚≠ê H√∂chste zuerst</option>
      <option value="asc">‚≠ê Niedrigste zuerst</option>
    </select>
  </div>

  <table>
    <thead>
      <tr>
        <th>Item</th>
        <th>Typ</th>
        <th>Rating</th>
        <th>Roll</th>
        <th>Kontakt</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody id="loot-table"></tbody>
  </table>

  <div class="edit-hint">
    Edit-Modus: <strong>STRG + ALT + E</strong>
  </div>

  <footer>
    <a href="impressum.html">Impressum</a>
    <a href="datenschutz.html">Datenschutz</a>
  </footer>

</div>

<script type="module">
import items from "./items.js";

let editMode=false;
const tbody=document.getElementById("loot-table");
const search=document.getElementById("search");
const statusFilter=document.getElementById("statusFilter");
const sortStars=document.getElementById("sortStars");

function starCount(s){return (s.match(/‚òÖ/g)||[]).length}

function render(){
  tbody.innerHTML="";
  let list=[...items];

  if(search.value)
    list=list.filter(i=>i.name.toLowerCase().includes(search.value.toLowerCase()));

  if(statusFilter.value!=="all")
    list=list.filter(i=>i.status===statusFilter.value);

  if(sortStars.value!=="none"){
    list.sort((a,b)=>{
      const d=starCount(b.stars)-starCount(a.stars);
      return sortStars.value==="desc"?d:-d;
    });
  }

  list.forEach(i=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`
      <td class="item-name">${i.name}</td>
      <td>${i.category}</td>
      <td class="stars">${i.stars}</td>
      <td>${i.roll}</td>
      <td>${i.contact}</td>
      <td class="status ${i.status==="Verf√ºgbar"?"verfuegbar":"vergeben"}">${i.status}</td>
    `;
    tbody.appendChild(tr);
  });
}

render();
search.oninput=render;
statusFilter.onchange=render;
sortStars.onchange=render;

document.addEventListener("keydown",e=>{
  if(e.ctrlKey&&e.altKey&&e.key==="e"){
    alert("Edit-Modus aktiviert.\n√Ñnderungen bitte in items.js vornehmen.");
  }
});
</script>
</body>
</html>
