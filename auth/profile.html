<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Mein Profil – Lootliste</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

  <h2>Mein Profil</h2>

  <div id="profileState">Lade…</div>

  <p>
    <button id="logoutBtn">Logout</button>
  </p>

  <p>
    <a href="../index.html">← Zur Lootliste</a>
  </p>

  <script type="module">
    import { getUser, logout } from "./auth.js";

    const state = document.getElementById("profileState");
    const logoutBtn = document.getElementById("logoutBtn");
    const user = getUser();

    if (!user || !user.name) {
      // Nicht eingeloggt → zurück zum Login
      location.href = "login.html";
    } else {
      state.innerHTML = `
        <strong>Username:</strong> ${user.name}<br>
        <strong>Eingeloggt seit:</strong>
        ${new Date(user.loginAt).toLocaleString("de-DE")}
      `;
    }

    logoutBtn.onclick = () => {
      logout();
      location.href = "../index.html";
    };
  </script>

</body>
</html>
