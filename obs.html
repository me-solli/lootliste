<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>D2R Lootliste OBS</title>

<style>
body {
  margin: 0;
  background: transparent;
  font-family: Arial, sans-serif;
  color: #e6d8a3;
}

.wrapper {
  width: 100%;
  background: rgba(0,0,0,0.72);
  padding: 10px;
}

.item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 6px;
  margin-bottom: 6px;
  border-radius: 10px;
  background: linear-gradient(
    to right,
    rgba(255,255,255,0.05),
    rgba(0,0,0,0)
  );
}

.icon {
  width: 34px;
  height: 34px;
  border-radius: 6px;
  background: rgba(255,255,255,0.08);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
}

.content {
  flex: 1;
}

.name {
  font-size: 14px;
  font-weight: bold;
  line-height: 1.1;
}

.type {
  font-size: 11px;
  opacity: 0.7;
  margin-top: 2px;
}

.status {
  width: 6px;
  height: 28px;
  border-radius: 4px;
}

.status.verf√ºgbar { background: #5CFF7A; }
.status.reserviert { background: #FFD479; }
.status.vergeben   { background: #FF6A6A; }
</style>
</head>

<body>
<div class="wrapper" id="list">Loading‚Ä¶</div>

<script>
function iconForType(type) {
  switch (type) {
    case "WAFFE": return "‚öîÔ∏è";
    case "RUESTUNG": return "üõ°Ô∏è";
    case "HELM": return "ü™ñ";
    case "SCHILD": return "üõ°Ô∏è";
    case "GUERTEL": return "üß∑";
    case "SCHUHE": return "üë¢";
    case "CHARM": return "üîÆ";
    default: return "üì¶";
  }
}

async function loadItems() {
  const res = await fetch(
    "https://lootliste-production.up.railway.app/api/items/latest?limit=15"
  );
  const items = await res.json();
  const list = document.getElementById("list");
  list.innerHTML = "";

  items.forEach(i => {
    const el = document.createElement("div");
    el.className = "item";
    el.innerHTML = `
      <div class="icon">${iconForType(i.type)}</div>
      <div class="content">
        <div class="name">${i.name}</div>
        <div class="type">${i.type}</div>
      </div>
      <div class="status ${i.status}"></div>
    `;
    list.appendChild(el);
  });
}

loadItems();
setInterval(loadItems, 60000);
</script>
</body>
</html>
